(this.webpackJsonpphoneboook=this.webpackJsonpphoneboook||[]).push([[0],{ 38:function(e,n,t){},39:function(e,n,t){'use strict';t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(2),u=t(0),i=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return Object(u.jsxs)('div',{ children:[e.name,' ',e.number,' ',Object(u.jsx)('button',{ onClick:function(){return t(e.id)},children:'delete' })] },e.id)}))},s=function(e){var n=e.persons,t=e.searchText,r=e.handleDelete;return''===t?Object(u.jsx)(i,{ persons:n,handleDelete:r }):Object(u.jsx)(i,{ persons:n.filter((function(e){return e.name.toLowerCase().includes(t)})),handleDelete:r })},d=function(e){return Object(u.jsxs)('div',{ children:['Filter persons by letter: ',Object(u.jsx)('input',{ value:e.searchText,onChange:e.handleText })] })},l=function(e){return Object(u.jsx)('div',{ children:Object(u.jsxs)('form',{ onSubmit:e.addObj,children:[Object(u.jsxs)('div',{ children:['Name: ',Object(u.jsx)('input',{ value:e.newName,onChange:e.handleNewName })] }),Object(u.jsxs)('div',{ children:['Number: ',Object(u.jsx)('input',{ value:e.newNum,onChange:e.handleNewNum })] }),Object(u.jsx)('div',{ children:Object(u.jsx)('button',{ type:'submit',children:'Add' }) })] }) })},j=t(4),b=t.n(j),h='/api/persons',f=function(){return b.a.get(h).then((function(e){return e.data}))},m=function(e){return b.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put(''.concat(h,'/').concat(e),n).then((function(e){return e.data}))},p=function(e){return b.a.delete(''.concat(h,'/').concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.errorMessage;return null===t&null===n?null:null===t?Object(u.jsx)('div',{ style:{ color:'green',background:'grey',fontSize:20,borderStyle:'solid',borderRadius:5,padding:10,marginBottom:10 },children:n }):Object(u.jsx)('div',{ style:{ color:'red',background:'grey',fontSize:20,borderStyle:'solid',borderRadius:5,padding:10,marginBottom:10 },children:t })},v=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(''),i=Object(a.a)(c,2),j=i[0],b=i[1],h=Object(o.useState)(''),v=Object(a.a)(h,2),g=v[0],w=v[1],N=Object(o.useState)(''),y=Object(a.a)(N,2),S=y[0],k=y[1],T=Object(o.useState)(null),D=Object(a.a)(T,2),C=D[0],A=D[1],B=Object(o.useState)(null),J=Object(a.a)(B,2),z=J[0],E=J[1];Object(o.useEffect)((function(){f().then((function(e){r(e)}))}),[]);return Object(u.jsxs)('div',{ children:[Object(u.jsx)('h2',{ children:'Phonebook' }),Object(u.jsx)(x,{ message:C,errorMessage:z }),Object(u.jsx)(d,{ searchText:S,handleText:function(e){return k(e.target.value)} }),Object(u.jsx)('h3',{ children:'Add a new person' }),Object(u.jsx)(l,{ addObj:function(e){e.preventDefault();var n={ name:j,number:g };if(t.map((function(e){return e.name})).includes(j)){var c=t.find((function(e){return e.name===j}));c.number===g?window.alert(''.concat(j,' is already present')):window.confirm(''.concat(c.name,' is already added to phonebook, replace the old number with a new one?'))&&O(c.id,n).then((function(e){A('Updated '.concat(e.name)),setTimeout((function(){return A(null)}),5e3),b(''),w('')})).catch((function(e){E('Information for '.concat(c.name,' has already been removed from the server'))})).then(f().then((function(e){r(e)})))}else m(n).then((function(e){r(t.concat(e)),A('Added '.concat(e.name)),setTimeout((function(){return A(null)}),5e3),b(''),w('')})).catch((function(e){E(''.concat(JSON.stringify(e.response.data.error)))}))},newName:j,handleNewName:function(e){return b(e.target.value)},newNum:g,handleNewNum:function(e){return w(e.target.value)} }),Object(u.jsx)('h3',{ children:'Numbers' }),Object(u.jsx)(s,{ persons:t,searchText:S,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm('Delete '.concat(n.name,' ?'))&&(p(e),r(t.filter((function(n){return n.id!==e}))))} })] })};t(38);c.a.render(Object(u.jsx)(v,{}),document.getElementById('root'))} },[[39,1,2]]])
//# sourceMappingURL=main.b4cfd14a.chunk.js.map